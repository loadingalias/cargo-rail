[graph]
targets = [
  "x86_64-unknown-linux-gnu",
  "aarch64-unknown-linux-gnu",
  "x86_64-pc-windows-msvc",
  "aarch64-apple-darwin",
  "aarch64-pc-windows-msvc",
]

[advisories]
yanked = "warn"

# Ignore unmaintained advisories for transitive dependencies we cannot easily control - TODO: Remove this once we have a better solution
ignore = [
  "RUSTSEC-2024-0370", # proc-macro-error (via git-cliff-core → rust-embed → include-flate)
]

[licenses]
# Common Open Source Licenses
allow = [
  "MIT",
  "Apache-2.0",
  "Apache-2.0 WITH LLVM-exception",
  "BSD-2-Clause",
  "BSD-3-Clause",
  "BSL-1.0",
  "CDLA-Permissive-2.0",
  "ISC",
  "Unicode-3.0",
  "CC0-1.0",
  "Zlib",
  "MPL-2.0",
]

confidence-threshold = 0.93

[bans]
multiple-versions = "warn"
wildcards = "allow"
highlight = "all"

skip = [
  # Windows ecosystem - commonly has version mismatches
  "windows-sys",
  "windows-targets",
  "windows-result",
  "windows-strings",
  "windows-core",
  "windows_aarch64_msvc",
  "windows_x86_64_gnu",
  "windows_x86_64_msvc",
  "windows-link",
  "windows-interface",
  "windows-implement",
  "windows",
  # Low-level hash/system dependencies
  "hashbrown",
  "foldhash",
  "linux-raw-sys",
  "rustix",
  # git-cliff-core transitive dependencies (via tera, cacache, rust-embed)
  "base64",
  "getrandom",
  "rand",
  "rand_chacha",
  "rand_core",
  "memmap2",
  "syn",
  "thiserror",
  "thiserror-impl",
  # cargo-semver-checks intentionally uses multiple rustdoc-types versions
  # to support different Rust toolchain versions
  "rustdoc-types",
  "trustfall-rustdoc-adapter",
  "itertools",
]

[sources]
unknown-registry = "warn"
unknown-git = "warn"
allow-registry = ["https://github.com/rust-lang/crates.io-index"]
